<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>𝕮𝖚𝖘𝖙𝖔𝖒 𝖌𝖊𝖆𝖗𝖘</title>
  <meta name="description" content="Custom Gears - Acessórios personalizados para carros e estilo streetwear." />
  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* CSS original permanece inalterado */
  </style>
</head>
<body>
  <div class="cart" onclick="toggleCartPopup()">🛒 Carrinho <span class="cart-count" id="cartCount">0</span></div>
  <header>Custom Gears</header>
  <div class="container">
    <h2>Produtos</h2>
    <div class="products" id="productList"></div>
  </div>
  <footer>
    <h4>Sobre Nós</h4>
    <p>Na Custom Gears, transformamos paixão automotiva em estilo. Criamos roupas e acessórios exclusivos, inspirados na cultura automotiva e no espírito livre das ruas.</p>
    <h4>Contato</h4>
    <p>Telefone: (41) 99973-7694</p>
    <p>Email: <a href="mailto:Customgears17@gmail.com">Customgears17@gmail.com</a></p>
    <h4>Redes Sociais</h4>
    <p><a href="https://www.instagram.com/custom_gears17?igsh=bmVtODg0cDk2NWEz" target="_blank">Instagram</a></p>
    <p>© 2025 Custom Gears. Todos os direitos reservados.</p>
  </footer>
  <div class="cart-popup" id="cartPopup"><div class="cart-content"><h3>Seu Carrinho</h3><div id="cartItems"></div><p id="cartTotal"></p><button onclick="checkout()" class="checkout">Chamar no WhatsApp</button><button onclick="closeCart()" style="margin-top:1rem;">Fechar</button></div></div>
  <button onclick="scrollToTop()" id="btnTop">↑</button>  <script>
    // Array de produtos com priceAdjust e tiers para itens 7-12
    const products = [
      { id:1, name:'Camiseta oversized Custom Gears', price:119.90, img:'https://i.postimg.cc/G3zD0FLD/camisa1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['P','M','G','GG','XG'], priceAdjust:{P:-10,M:0,G:10,GG:15,XG:20} },
      { id:2, name:'Blusa moletom com capuz Custom Gears', price:159.90, img:'https://i.postimg.cc/dtZXDB2x/manopla1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['P','M','G','GG','XG'], priceAdjust:{P:-15,M:0,G:20,GG:25,XG:30} },
      { id:3, name:'Blusa moletom Custom Gears', price:149.90, img:'https://i.postimg.cc/dtZXDB2x/manopla1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['P','M','G','GG','XG'], priceAdjust:{P:-5,M:0,G:10,GG:12,XG:18} },
      { id:4, name:'Calça moletom Custom Gears', price:139.90, img:'https://i.postimg.cc/dtZXDB2x/manopla1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['P','M','G','GG','XG'], priceAdjust:{P:-8,M:0,G:12,GG:18,XG:22} },
      { id:5, name:'Meias cano alto Custom Gears', price:29.90, img:'https://i.postimg.cc/dtZXDB2x/manopla1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['M','G','GG'], priceAdjust:{M:0,G:5,GG:7} },
      { id:6, name:'Manopla câmbio inox Custom Gears', price:39.90, img:'https://i.postimg.cc/J04rPZ4y/volante1.jpg', colors:['Preto','Cinza','Cromado'], sizes:['4 polegadas'], priceAdjust:{'4 polegadas':0} },
      { id:7, name:'Bandeira Custom Gears', price:49.90, img:'https://i.postimg.cc/J04rPZ4y/volante1.jpg', colors:['Preto','Branco'], sizes:['90×150cm','122×183cm'], priceAdjust:{'90×150cm':0,'122×183cm':15}, tiers:[{minQty:1,factor:1},{minQty:5,factor:0.95},{minQty:10,factor:0.9}] },
      { id:8, name:'Coifa câmbio Custom Gears', price:24.90, img:'https://i.postimg.cc/J04rPZ4y/volante1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['Universal'], priceAdjust:{Universal:0}, tiers:[{minQty:1,factor:1},{minQty:3,factor:0.97},{minQty:6,factor:0.94}] },
      { id:9, name:'Copo térmico personalizado Custom Gears', price:19.90, img:'https://i.postimg.cc/J04rPZ4y/volante1.jpg', colors:['Preto','Branco','Cinza'], sizes:['400ml','470ml'], priceAdjust:{'400ml':0,'470ml':5}, tiers:[{minQty:1,factor:1},{minQty:4,factor:0.9},{minQty:8,factor:0.85}] },
      { id:10,name:'Chaveiro cordão Custom Gears', price:29.90, img:'https://i.postimg.cc/J04rPZ4y/volante1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['2,5cm×54cm','3,5cm×14,5cm','2,5cm×19cm'], priceAdjust:{'2,5cm×54cm':0,'3,5cm×14,5cm':0,'2,5cm×19cm':0}, tiers:[{minQty:1,factor:1},{minQty:5,factor:0.92},{minQty:10,factor:0.88}] },
      { id:11,name:'Adesivos refletivos Custom Gears', price:19.90, img:'https://i.postimg.cc/nVqD3dzV/chaveiro1.jpg', colors:['Branco','Cinza'], sizes:['100cm×10cm','60cm×6cm'], priceAdjust:{'100cm×10cm':0,'60cm×6cm':0}, tiers:[{minQty:1,factor:1},{minQty:10,factor:0.9},{minQty:20,factor:0.8}] },
      { id:12,name:'Aromatizante automotivo Custom Gears', price:8.90,img:'https://i.postimg.cc/nVqD3dzV/chaveiro1.jpg', colors:['Branco','Preto','Cinza','Roxo'], sizes:['5,4cm×5,4cm','7,7cm×5,4cm'], priceAdjust:{'5,4cm×5,4cm':0,'7,7cm×5,4cm':0}, tiers:[{minQty:1,factor:1},{minQty:8,factor:0.95},{minQty:15,factor:0.9}] }
    ];

    const inventory = {};
    products.forEach(p=>{ inventory[p.id]={}; p.colors.forEach(c=>p.sizes.forEach(s=>inventory[p.id][`${c}|${s}`]=5)); });
    let cart = JSON.parse(localStorage.getItem('cart'))||[];

    function calculatePrice(p,size,qty){
      const base = p.price + (p.priceAdjust?.[size]||0);
      const factor = p.tiers ? [...p.tiers].reverse().find(t=>qty>=t.minQty).factor : 1;
      return (base*factor).toFixed(2);
    }

    function renderProducts(){
      const list=document.getElementById('productList'); list.innerHTML='';
      products.forEach(p=>{
        const card=document.createElement('div'); card.className='product'; card.id=`prod-${p.id}`;
        const keys=Object.keys(inventory[p.id]).filter(k=>inventory[p.id][k]>0);
        if(!keys.length) card.innerHTML=`<img src="${p.img}" alt="${p.name}"/><h3>${p.name}</h3><span class="sold-out-text">Esgotado</span>`;
        else{
          const cols=[...new Set(keys.map(k=>k.split('|')[0]))];
          const sizs=[...new Set(keys.map(k=>k.split('|')[1]))];
          const init=sizs[0];
          const pr=calculatePrice(p,init,1);
          card.innerHTML=`<img src="${p.img}" alt="${p.name}"/><h3>${p.name}</h3><p>R$${pr}</p><p class="stock-label">Estoque: ${inventory[p.id][`${cols[0]}|${init}`]}</p><label>Cor:<select id="cor-${p.id}">${cols.map(c=>`<option>${c}</option>`).join('')}</select></label><br><label>Tamanho:<select id="tam-${p.id}">${sizs.map(s=>`<option>${s}</option>`).join('')}</select></label><br><button onclick="addToCart(${p.id})">Adicionar ao Carrinho</button>`;
        }
        list.appendChild(card);
      });
    }

    function updateStockUI(){
      products.forEach(p=>{
        const card=document.getElementById(`prod-${p.id}`);
        const cor=card.querySelector(`#cor-${p.id}`)?.value;
        const tam=card.querySelector(`#tam-${p.id}`)?.value;
        if(!cor||!tam) return;
        const key=`${cor}|${tam}`;
        const stk=inventory[p.id][key]||0;
        card.querySelector('.stock-label').textContent=`Estoque: ${stk}`;
        const qtyInCart = cart.filter(i=>i.id===p.id&&i.cor===cor&&i.tam===tam).reduce((a,i)=>a+i.quantity,0)+1;
        const pr=calculatePrice(p,tam,qtyInCart);
        card.querySelector('p').textContent=`R$${pr}`;
        const btn=card.querySelector('button'); btn.textContent=stk>0?'Adicionar ao Carrinho':'Esgotado'; btn.disabled=stk<=0;
      });
    }

    function addToCart(id){
      const cor=document.getElementById(`cor-${id}`).value;
      const tam=document.getElementById(`tam-${id}`).value;
      const key=`${cor}|${tam}`;
      if(inventory[id][key]<=0) return;
      inventory[id][key]--;
      updateStockUI();
      const p=products.find(x=>x.id===id);
      const exist=cart.find(i=>i.id===id&&i.cor===cor&&i.tam===tam);
      if(exist) exist.quantity++;
      else cart.push({id,cor,tam,quantity:1});
      localStorage.setItem('cart',JSON.stringify(cart));
      document.getElementById('cartCount').textContent=cart.reduce((a,i)=>a+i.quantity,0);
    }

    function renderCartPopup(){
      const container=document.getElementById('cartItems'); container.innerHTML=''; let total=0;
      cart.forEach(item=>{
        const p=products.find(x=>x.id===item.id);
        const unit=calculatePrice(p,item.tam,item.quantity);
        const line=(unit*item.quantity).toFixed(2);
        total+=parseFloat(line);
        container.innerHTML+=`<p>${item.quantity}× ${p.name} (${item.cor}, ${item.tam}) - R$${unit} un | Total: R$${line}</p>`;
      });
      document.getElementById('cartTotal').innerText=`Total: R$${total.toFixed(2)}`;
    }

    // Funções toggleCartPopup, changeQty, removeFromCart, closeCart, checkout mantêm lógica original mas chamam renderCartPopup() e calculatePrice()

    document.addEventListener('change',e=>{ if(e.target.tagName==='SELECT') updateStockUI(); });
    document.addEventListener('DOMContentLoaded',()=>{ renderProducts(); updateStockUI(); document.getElementById('cartCount').textContent=cart.reduce((a,i)=>a+i.quantity,0); });
  </script></body>
</html>
