<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>𝕮𝖚𝖘𝖙𝖔𝖒 𝖌𝖊𝖆𝖗𝖘</title>
  <meta name="description" content="Custom Gears - Acessórios personalizados para carros e estilo streetwear." />
  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Seu CSS permanece inalterado */
  </style>
</head>
<body>
  <div class="cart" onclick="toggleCartPopup()">
    🛒 Carrinho <span class="cart-count" id="cartCount">0</span>
  </div>
  <header>Custom Gears</header>
  <div class="container">
    <h2>Produtos</h2>
    <div class="products" id="productList"></div>
  </div>  <!-- Sobre Nós & Contato -->  <footer>
    <!-- Conteúdo fixo de Sobre Nós e Contato -->
  </footer>  <!-- Popup Carrinho -->  <div class="cart-popup" id="cartPopup">
    <div class="cart-content">
      <h3>Seu Carrinho</h3>
      <div id="cartItems"></div>
      <p id="cartTotal"></p>
      <button onclick="checkout()" class="checkout">Chamar no WhatsApp</button>
      <button onclick="closeCart()" style="margin-top:1rem;">Fechar</button>
    </div>
  </div><button onclick="scrollToTop()" id="btnTop" title="Voltar ao Topo">↑</button>

  <script>
    const products = [
      // ... seu array de 12 produtos ...
    ];

    // Carrega inventário do localStorage ou inicializa padrão
    function loadInventory() {
      const saved = localStorage.getItem('inventory');
      if (saved) return JSON.parse(saved);
      const inv = {};
      products.forEach(p => {
        inv[p.id] = {};
        p.colors.forEach(c => p.sizes.forEach(s => inv[p.id][`${c}|${s}`] = 5));
      });
      return inv;
    }

    // Salva inventário no localStorage
    function saveInventory() {
      localStorage.setItem('inventory', JSON.stringify(inventory));
    }

    // Inicializa inventário persistido e carrinho
    const inventory = loadInventory();
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function renderProducts(list = products) {
      const productList = document.getElementById('productList');
      productList.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product';
        card.id = `prod-${p.id}`;
        const keys = Object.keys(inventory[p.id]).filter(k => inventory[p.id][k] > 0);
        if (keys.length === 0) {
          card.innerHTML = `<img src="${p.img}" alt="${p.name}"/><h3>${p.name}</h3><span class="sold-out-text">Esgotado</span>`;
        } else {
          const colors = [...new Set(keys.map(k => k.split('|')[0]))];
          const sizes  = [...new Set(keys.map(k => k.split('|')[1]))];
          card.innerHTML = `
            <img src="${p.img}" alt="${p.name}"/>
            <h3>${p.name}</h3>
            <p>R$${p.price.toFixed(2)}</p>
            <p class="stock-label">Estoque: ${inventory[p.id][`${colors[0]}|${sizes[0]}`]}</p>
            <label>Cor:<select id="cor-${p.id}">${colors.map(c => `<option>${c}</option>`).join('')}</select></label><br>
            <label>Tamanho:<select id="tam-${p.id}">${sizes.map(s => `<option>${s}</option>`).join('')}</select></label><br>
            <button onclick="addToCart(${p.id})">Adicionar ao Carrinho</button>
          `;
        }
        productList.appendChild(card);
      });
    }

    function updateStockUI() {
      products.forEach(p => {
        const card = document.getElementById(`prod-${p.id}`);
        const corSel = card?.querySelector(`#cor-${p.id}`);
        const tamSel = card?.querySelector(`#tam-${p.id}`);
        if (!corSel || !tamSel) return;
        const keys = Object.keys(inventory[p.id]).filter(k => inventory[p.id][k] > 0);
        const colors = [...new Set(keys.map(k => k.split('|')[0]))];
        const sizes  = [...new Set(keys.map(k => k.split('|')[1]))];
        Array.from(corSel.options).forEach(o => o.hidden = !colors.includes(o.value));
        Array.from(tamSel.options).forEach(o => o.hidden = !sizes.includes(o.value));
        if (!colors.includes(corSel.value)) corSel.value = colors[0];
        if (!sizes.includes(tamSel.value)) tamSel.value = sizes[0];
        const stock = inventory[p.id][`${corSel.value}|${tamSel.value}`] || 0;
        card.querySelector('.stock-label').textContent = `Estoque: ${stock}`;
        const btn = card.querySelector('button');
        if (stock <= 0) {
          btn.textContent = 'Esgotado'; btn.disabled = true; btn.classList.add('sold-out-btn');
        } else {
          btn.textContent = 'Adicionar ao Carrinho'; btn.disabled = false; btn.classList.remove('sold-out-btn');
        }
      });
    }

    function addToCart(id) {
      const cor = document.getElementById(`cor-${id}`)?.value;
      const tam = document.getElementById(`tam-${id}`)?.value;
      const key = `${cor}|${tam}`;
      if (inventory[id][key] <= 0) return;
      inventory[id][key]--;
      saveInventory();
      updateStockUI();
      const exists = cart.find(i => i.id === id && i.cor === cor && i.tam === tam);
      if (exists) exists.quantity++;
      else cart.push({ id, cor, tam, quantity: 1 });
      localStorage.setItem('cart', JSON.stringify(cart));
      document.getElementById('cartCount').textContent = cart.reduce((a, i) => a + i.quantity, 0);
    }

    // ... resto das funções de carrinho (toggleCartPopup, renderCartPopup, changeQty, removeFromCart, closeCart, checkout) ...

    document.addEventListener('change', e => { if (e.target.tagName === 'SELECT') updateStockUI(); });
    document.addEventListener('DOMContentLoaded', () => {
      renderProducts();
      updateStockUI();
      document.getElementById('cartCount').textContent = cart.reduce((a, i) => a + i.quantity, 0);
    });
  </script></body>
</html>
